{
  "metadata": {
    "title": "Chunk 2: Path 2 â€” Ticket + Auto-Close",
    "description": "Customer C006066 (Rajesh Kumar) disputes duplicate $45 charge via chat popup, ticket created and auto-resolved under threshold",
    "base_url": "",
    "viewport": { "width": 1920, "height": 1080 },
    "voice": "en-US-AndrewNeural",
    "rate": "-5%",
    "output_name": "chunk_2_path2_autoclose"
  },
  "steps": [
    {
      "id": "s01_nav_backend",
      "action": "navigate",
      "url": "http://localhost:8010/health",
      "narration": "",
      "wait_after": 1000
    },
    {
      "id": "s02_cleanup",
      "action": "evaluate",
      "expression": "(async () => { try { await fetch('/channel-router/reset', { method: 'POST' }); } catch(e) {} })()",
      "narration": "",
      "wait_after": 2000
    },
    {
      "id": "s03_open_chat",
      "action": "navigate",
      "url": "http://localhost:5173/ai-poc/crm-portal/live-chat-popup?customerId=C006066",
      "narration": "",
      "wait_after": 5000
    },
    {
      "id": "s04_type_msg1",
      "action": "type",
      "selector": "[placeholder=\"Type a message...\"]",
      "value": "I just noticed a duplicate charge of $45 on my latest bill for 'Premium Support Add-on'. I only authorized this once, not twice.",
      "type_delay": 30,
      "narration": "",
      "wait_after": 500
    },
    {
      "id": "s05_send_msg1",
      "action": "press",
      "key": "Enter",
      "narration": "",
      "wait_after": 1000
    },
    {
      "id": "s06_wait_response1",
      "action": "wait",
      "duration": 20000,
      "narration": "",
      "wait_after": 0
    },
    {
      "id": "s07_scroll1",
      "action": "evaluate",
      "expression": "(() => { document.querySelectorAll('div').forEach(el => { if (el.scrollHeight > el.clientHeight + 20 && el.clientHeight > 200) el.scrollTop = el.scrollHeight; }); })()",
      "narration": "",
      "wait_after": 3000
    },
    {
      "id": "s08_type_msg2",
      "action": "type",
      "selector": "[placeholder=\"Type a message...\"]",
      "value": "No, I did not authorize two charges. I only signed up for Premium Support once. I want to dispute the duplicate $45 charge and get a refund.",
      "type_delay": 30,
      "narration": "",
      "wait_after": 500
    },
    {
      "id": "s09_send_msg2",
      "action": "press",
      "key": "Enter",
      "narration": "",
      "wait_after": 1000
    },
    {
      "id": "s10_wait_response2",
      "action": "wait",
      "duration": 20000,
      "narration": "",
      "wait_after": 0
    },
    {
      "id": "s11_scroll2",
      "action": "evaluate",
      "expression": "(() => { document.querySelectorAll('div').forEach(el => { if (el.scrollHeight > el.clientHeight + 20 && el.clientHeight > 200) el.scrollTop = el.scrollHeight; }); })()",
      "narration": "",
      "wait_after": 3000
    },
    {
      "id": "s12_type_msg3",
      "action": "type",
      "selector": "[placeholder=\"Type a message...\"]",
      "value": "Yes, please go ahead and create the ticket.",
      "type_delay": 30,
      "narration": "",
      "wait_after": 500
    },
    {
      "id": "s13_send_msg3",
      "action": "press",
      "key": "Enter",
      "narration": "",
      "wait_after": 1000
    },
    {
      "id": "s14_wait_response3",
      "action": "wait",
      "duration": 25000,
      "narration": "",
      "wait_after": 0
    },
    {
      "id": "s15_scroll3",
      "action": "evaluate",
      "expression": "(() => { document.querySelectorAll('div').forEach(el => { if (el.scrollHeight > el.clientHeight + 20 && el.clientHeight > 200) el.scrollTop = el.scrollHeight; }); })()",
      "narration": "",
      "wait_after": 4000
    },
    {
      "id": "s16_end",
      "action": "wait",
      "duration": 2000,
      "narration": "",
      "wait_after": 0
    }
  ]
}
